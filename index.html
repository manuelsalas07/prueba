<script>
    document.getElementById("payButton").addEventListener("click", function() {
        // Llama a tu servidor para obtener el JWT
        fetch('https://0f68-201-206-191-87.ngrok-free.app/get-jwt') // Usa la URL de ngrok aquÃ­
            .then(response => response.json())
            .then(data => {
                if (data.jwt) {
                    // Crea el enlace de pago
                    const paymentUrl = `https://apitest.cybersource.com/up/v1/capture-contexts?jwt=${data.jwt}`;
                    // Redirige al usuario al enlace de pago
                    window.location.href = paymentUrl;
                } else {
                    alert('No se pudo obtener el JWT');
                }
            })
            .catch(error => {
                console.error('Error al obtener JWT:', error);
                alert('Error al obtener JWT');
            });
    });
</script>
